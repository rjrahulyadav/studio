{
  "entities": {
    "TrainingModule": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "TrainingModule",
      "type": "object",
      "description": "Represents a training module offered by DhaniHya Solutions.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the training module."
        },
        "title": {
          "type": "string",
          "description": "The title of the training module."
        },
        "description": {
          "type": "string",
          "description": "A description of what the training module entails."
        },
        "startDate": {
          "type": "string",
          "description": "The start date of the training module.",
          "format": "date-time"
        },
        "endDate": {
          "type": "string",
          "description": "The end date of the training module.",
          "format": "date-time"
        },
        "capacity": {
          "type": "number",
          "description": "The maximum number of participants allowed in the training module."
        }
      },
      "required": [
        "id",
        "title",
        "description",
        "startDate",
        "endDate",
        "capacity"
      ]
    },
    "Applicant": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Applicant",
      "type": "object",
      "description": "Represents an individual who has applied for a training module.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the applicant."
        },
        "firstName": {
          "type": "string",
          "description": "The first name of the applicant."
        },
        "lastName": {
          "type": "string",
          "description": "The last name of the applicant."
        },
        "email": {
          "type": "string",
          "description": "The email address of the applicant.",
          "format": "email"
        },
        "phone": {
          "type": "string",
          "description": "The phone number of the applicant."
        },
        "trainingModuleId": {
          "type": "string",
          "description": "Reference to TrainingModule. (Relationship: TrainingModule 1:N Applicant)"
        },
        "applicationDate": {
          "type": "string",
          "description": "The date when the application was submitted.",
          "format": "date-time"
        }
      },
      "required": [
        "id",
        "firstName",
        "lastName",
        "email",
        "trainingModuleId",
        "applicationDate"
      ]
    }
  },
  "auth": {
    "providers": [
      "password",
      "anonymous"
    ]
  },
  "firestore": {
    "structure": [
      {
        "path": "/trainingModules/{trainingModuleId}",
        "definition": {
          "entityName": "TrainingModule",
          "schema": {
            "$ref": "#/backend/entities/TrainingModule"
          },
          "description": "Stores training module information. No authorization is required to read training module data.",
          "params": [
            {
              "name": "trainingModuleId",
              "description": "The unique identifier for the training module."
            }
          ]
        }
      },
      {
        "path": "/trainingModules/{trainingModuleId}/applicants/{applicantId}",
        "definition": {
          "entityName": "Applicant",
          "schema": {
            "$ref": "#/backend/entities/Applicant"
          },
          "description": "Stores applicant information for a specific training module. Includes denormalized 'trainingModuleId' for authorization independence.",
          "params": [
            {
              "name": "trainingModuleId",
              "description": "The unique identifier for the training module."
            },
            {
              "name": "applicantId",
              "description": "The unique identifier for the applicant."
            }
          ]
        }
      }
    ],
    "reasoning": "The data structure prioritizes authorization independence and QAPs.  Training modules are stored in a top-level collection `/trainingModules`. Applicants are stored in a subcollection `/trainingModules/{trainingModuleId}/applicants/{applicantId}`. This structure allows for straightforward security rules based on the existence of a document. Access to training modules is public, but the creation of applicant documents is restricted to authenticated users. No data is shared across collections requiring authorization checks. The `trainingModuleId` is duplicated into the `Applicant` entity. This design eliminates the need for `get()` calls in security rules, enabling atomic operations (transactions/batches) and easier debugging. Because Applicants are stored in a subcollection of the `trainingModules` collection, listing all applicants is namespaced, enabling secure list operations. Admins would need a separate UI to view all applicants across all training modules, but this is a simple aggregation of data that does not impact the security rules."
  }
}